<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Band Instrument Fitting Quiz</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6a4c93;
            --secondary: #f8bbd0;
            --accent: #ff9a8b;
            --light: #f9f9f9;
            --dark: #2c3e50;
            --correct: #4CAF50;
            --incorrect: #F44336;
            --highlight: #FFD166;
        }
        
        body {
            font-family: 'Nunito', sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f7f4;
            color: var(--dark);
            background-image: radial-gradient(circle at 10% 20%, rgba(248, 187, 208, 0.2) 0%, rgba(106, 76, 147, 0.1) 90%);
        }
        
        .page {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: none;
            border: 3px solid var(--secondary);
            position: relative;
            overflow: hidden;
        }
        
        .page::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 10px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }
        
        .page.active {
            display: block;
            animation: bounceIn 0.6s;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.9); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        h1, h2 {
            color: var(--primary);
            margin-top: 0;
            font-weight: 700;
        }
        
        h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }
        
        .intro {
            text-align: center;
            padding: 20px;
        }
        
        .intro p {
            font-size: 1.1em;
            line-height: 1.8;
        }
        
        .audio-container {
            margin: 20px 0;
            text-align: center;
            background-color: var(--light);
            padding: 15px;
            border-radius: 10px;
            border: 2px dashed var(--accent);
        }
        
        audio {
            width: 100%;
            max-width: 400px;
            margin: 10px 0;
            border-radius: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .question {
            margin: 25px 0;
            background-color: var(--light);
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid var(--accent);
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .option {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background-color: white;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        
        .option:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            border-color: var(--accent);
        }
        
        .option.selected {
            border-color: var(--primary);
            background-color: var(--secondary);
            color: var(--dark);
            transform: scale(1.05);
        }
        
        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        button {
            padding: 12px 25px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        button:disabled {
            background: #ccc;
            transform: none;
            box-shadow: none;
            cursor: not-allowed;
        }
        
        .start-btn {
            padding: 15px 30px;
            font-size: 18px;
            margin: 30px auto;
            display: block;
            background: linear-gradient(135deg, var(--accent), #ff6b6b);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .results {
            text-align: center;
            padding: 20px;
        }
        
        .instrument-card {
            display: inline-block;
            margin: 20px;
            padding: 25px;
            border-radius: 15px;
            background: white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            width: 200px;
            vertical-align: top;
            transition: all 0.3s;
            border: 3px solid transparent;
            position: relative;
        }
        
        .instrument-card:nth-child(1) {
            border-color: gold;
            transform: scale(1.1);
            z-index: 3;
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }
        
        .instrument-card:nth-child(2) {
            border-color: silver;
            transform: scale(1.05);
            z-index: 2;
        }
        
        .instrument-card:nth-child(3) {
            border-color: #cd7f32;
            z-index: 1;
        }
        
        .instrument-img {
            width: 160px;
            height: 160px;
            object-fit: contain;
            margin-bottom: 15px;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.2));
        }
        
        .progress-container {
            width: 100%;
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            margin: 30px 0;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 10px;
            width: 0%;
            transition: width 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .score-display {
            margin: 20px 0;
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary);
            padding: 15px;
            background-color: var(--light);
            border-radius: 10px;
            display: inline-block;
        }
        
        .section-title {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }
        
        .section-title::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            right: -50%;
            bottom: -50%;
            background: linear-gradient(
                to bottom right, 
                rgba(255,255,255,0.3) 0%, 
                rgba(255,255,255,0) 50%, 
                rgba(255,255,255,0.3) 100%
            );
            transform: rotate(30deg);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) rotate(30deg); }
            100% { transform: translateX(100%) rotate(30deg); }
        }
        
        .emoji {
            font-size: 1.5em;
            margin-right: 10px;
            vertical-align: middle;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--accent);
            opacity: 0;
        }
        
        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(1000px) rotate(360deg); opacity: 0; }
        }
        
        .music-note {
            position: absolute;
            font-size: 24px;
            opacity: 0;
            animation: float-up 2s forwards;
        }
        
        @keyframes float-up {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }
        
        @media (max-width: 600px) {
            .options {
                grid-template-columns: 1fr;
            }
            
            .instrument-card {
                width: 80%;
                margin: 10px auto;
                display: block;
            }
            
            .instrument-card:nth-child(1),
            .instrument-card:nth-child(2),
            .instrument-card:nth-child(3) {
                transform: none;
            }
        }

        .question-label {
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
            display: block;
        }

        .instrument-card .note {
            font-size: 0.9em;
            color: var(--primary);
            margin-top: 10px;
            font-style: italic;
        }

        .instructions-box {
            background-color: var(--light);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid var(--primary);
        }
    </style>
</head>
<body>
    <!-- Page 1: Introduction -->
    <div class="page active" id="page1">
        <div class="intro">
            <h1>🎵 Band Instrument Fitting Quiz 🎺</h1>
            <p>Welcome to the most fun way to find your perfect band instrument!</p>
            <p>This quiz will help match your natural abilities to the instrument that will help you shine in the band.</p>
            <p>Just like in sports, different instruments suit different people. We'll test your pitch, rhythm, and more to find your best match!</p>
            <p>Remember: This is just a suggestion to set you up for success. You can choose any instrument you love!</p>
            <button class="start-btn" onclick="nextPage()">Let's Get Started! 🎶</button>
        </div>
    </div>

    <!-- Page 2: Section A Instructions -->
    <div class="page" id="page2">
        <div class="section-title">
            <h2>Section A - Pitch Test</h2>
        </div>
        
        <div class="instructions-box">
            <h3>How to Take the Pitch Test:</h3>
            <ol>
                <li>Click the play button to listen to two musical notes</li>
                <li>The first note will play, followed by a short pause, then the second note</li>
                <li>Determine if the second note is higher, lower, or the same as the first note</li>
                <li>Select your answer by clicking the appropriate button:
                    <ul>
                        <li><strong>"H"</strong> if the second note is <strong>Higher</strong> than the first</li>
                        <li><strong>"L"</strong> if it is <strong>Lower</strong></li>
                        <li><strong>"S"</strong> if it is the <strong>Same</strong></li>
                    </ul>
                </li>
                <li>You can replay the audio as many times as needed</li>
            </ol>
            <p><strong>Tip:</strong> Try humming the first note to yourself, then compare it to the second note.</p>
        </div>
        
        <div class="audio-container">
            <p>Instructions:</p>
            <audio id="pitchInstruction" controls src="audio/pitch-instruction.mp3"></audio>
        </div>
        
        <div class="audio-container">
            <p>Example:</p>
            <audio id="pitchExample" controls src="audio/pitch-example.mp3"></audio>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="nextPage()">Next ➡️</button>
        </div>
    </div>

    <!-- Page 3: Section A Question 1 -->
    <div class="page" id="page3">
        <div class="section-title">
            <h2>Section A - Pitch Test</h2>
        </div>
        <span class="question-label">Question A1</span>
        <p>Listen to the two pitches:</p>
        
        <div class="audio-container">
            <audio id="pitchQ1" controls src="audio/pitch1.mp3"></audio>
        </div>
        
        <div class="question">
            <p>Is the second note:</p>
            <div class="options">
                <div class="option" onclick="selectOption(this, 'A1', 'H')">H (Higher)</div>
                <div class="option" onclick="selectOption(this, 'A1', 'L')">L (Lower)</div>
                <div class="option" onclick="selectOption(this, 'A1', 'S')">S (Same)</div>
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="nextPage()" id="nextBtnA1" disabled>Next ➡️</button>
        </div>
    </div>

    <!-- Page 4: Section A Question 2 -->
    <div class="page" id="page4">
        <div class="section-title">
            <h2>Section A - Pitch Test</h2>
        </div>
        <span class="question-label">Question A2</span>
        <p>Listen to the two pitches:</p>
        
        <div class="audio-container">
            <audio id="pitchQ2" controls src="audio/pitch2.mp3"></audio>
        </div>
        
        <div class="question">
            <p>Is the second note:</p>
            <div class="options">
                <div class="option" onclick="selectOption(this, 'A2', 'H')">H (Higher)</div>
                <div class="option" onclick="selectOption(this, 'A2', 'L')">L (Lower)</div>
                <div class="option" onclick="selectOption(this, 'A2', 'S')">S (Same)</div>
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="nextPage()" id="nextBtnA2" disabled>Next ➡️</button>
        </div>
    </div>

    <!-- Page 5: Section A Question 3 -->
    <div class="page" id="page5">
        <div class="section-title">
            <h2>Section A - Pitch Test</h2>
        </div>
        <span class="question-label">Question A3</span>
        <p>Listen to the two pitches:</p>
        
        <div class="audio-container">
            <audio id="pitchQ3" controls src="audio/pitch3.mp3"></audio>
        </div>
        
        <div class="question">
            <p>Is the second note:</p>
            <div class="options">
                <div class="option" onclick="selectOption(this, 'A3', 'H')">H (Higher)</div>
                <div class="option" onclick="selectOption(this, 'A3', 'L')">L (Lower)</div>
                <div class="option" onclick="selectOption(this, 'A3', 'S')">S (Same)</div>
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="showSectionScore('A')" id="nextBtnA3" disabled>See Results! 🎉</button>
        </div>
    </div>

    <!-- Page 6: Section A Results -->
    <div class="page" id="page6">
        <div class="section-title">
            <h2>Section A - Pitch Test Results</h2>
        </div>
        
        <div class="score-display">
            <p>You got <span id="scoreA">0</span> out of 3 correct!</p>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progressA"></div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="startSectionB()">Continue to Section B ➡️</button>
        </div>
    </div>

    <!-- Section B Pages (Melody Test) -->
    <div class="page" id="page7">
        <div class="section-title">
            <h2>Section B - Melody Test</h2>
        </div>
        
        <div class="instructions-box">
            <h3>How to Take the Melody Test:</h3>
            <ol>
                <li>Click the play button to listen to two short melodies</li>
                <li>The first melody will play, followed by a short pause, then the second melody</li>
                <li>Determine if the second melody is different or the same as the first melody</li>
                <li>Select your answer by clicking the appropriate button:
                    <ul>
                        <li><strong>"D"</strong> if the second melody is <strong>Different</strong></li>
                        <li><strong>"S"</strong> if it is the <strong>Same</strong></li>
                    </ul>
                </li>
                <li>You can replay the audio as many times as needed</li>
            </ol>
            <p><strong>Tip:</strong> Focus on the overall shape of the melody rather than individual notes.</p>
        </div>
        
        <div class="audio-container">
            <p>Instructions:</p>
            <audio id="melodyInstruction" controls src="audio/melody-instruction.mp3"></audio>
        </div>
        
        <div class="audio-container">
            <p>Example:</p>
            <audio id="melodyExample" controls src="audio/melody-example.mp3"></audio>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="nextPage()">Next ➡️</button>
        </div>
    </div>

    <!-- Page 8: Section B Question 1 -->
    <div class="page" id="page8">
        <div class="section-title">
            <h2>Section B - Melody Test</h2>
        </div>
        <span class="question-label">Question B1</span>
        <p>Listen to the two melodies:</p>
        
        <div class="audio-container">
            <audio id="melodyQ1" controls src="audio/melody1.mp3"></audio>
        </div>
        
        <div class="question">
            <p>Is the second melody:</p>
            <div class="options">
                <div class="option" onclick="selectOption(this, 'B1', 'D')">D (Different)</div>
                <div class="option" onclick="selectOption(this, 'B1', 'S')">S (Same)</div>
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="nextPage()" id="nextBtnB1" disabled>Next ➡️</button>
        </div>
    </div>

    <!-- Page 9: Section B Question 2 -->
    <div class="page" id="page9">
        <div class="section-title">
            <h2>Section B - Melody Test</h2>
        </div>
        <span class="question-label">Question B2</span>
        <p>Listen to the two melodies:</p>
        
        <div class="audio-container">
            <audio id="melodyQ2" controls src="audio/melody2.mp3"></audio>
        </div>
        
        <div class="question">
            <p>Is the second melody:</p>
            <div class="options">
                <div class="option" onclick="selectOption(this, 'B2', 'D')">D (Different)</div>
                <div class="option" onclick="selectOption(this, 'B2', 'S')">S (Same)</div>
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="nextPage()" id="nextBtnB2" disabled>Next ➡️</button>
        </div>
    </div>

    <!-- Page 10: Section B Question 3 -->
    <div class="page" id="page10">
        <div class="section-title">
            <h2>Section B - Melody Test</h2>
        </div>
        <span class="question-label">Question B3</span>
        <p>Listen to the two melodies:</p>
        
        <div class="audio-container">
            <audio id="melodyQ3" controls src="audio/melody3.mp3"></audio>
        </div>
        
        <div class="question">
            <p>Is the second melody:</p>
            <div class="options">
                <div class="option" onclick="selectOption(this, 'B3', 'D')">D (Different)</div>
                <div class="option" onclick="selectOption(this, 'B3', 'S')">S (Same)</div>
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="showSectionScore('B')" id="nextBtnB3" disabled>See Results! 🎉</button>
        </div>
    </div>

    <!-- Page 11: Section B Results -->
    <div class="page" id="page11">
        <div class="section-title">
            <h2>Section B - Melody Test Results</h2>
        </div>
        
        <div class="score-display">
            <p>You got <span id="scoreB">0</span> out of 3 correct!</p>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progressB"></div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="startSectionC()">Continue to Section C ➡️</button>
        </div>
    </div>

    <!-- Section C Pages (Rhythm Test) -->
    <div class="page" id="page12">
        <div class="section-title">
            <h2>Section C - Rhythm Test</h2>
        </div>
        
        <div class="instructions-box">
            <h3>How to Take the Rhythm Test:</h3>
            <ol>
                <li>Click the play button to listen to two rhythm patterns</li>
                <li>The first rhythm will play, followed by a short pause, then the second rhythm</li>
                <li>Determine if the second rhythm is different or the same as the first rhythm</li>
                <li>Select your answer by clicking the appropriate button:
                    <ul>
                        <li><strong>"D"</strong> if the second rhythm is <strong>Different</strong></li>
                        <li><strong>"S"</strong> if it is the <strong>Same</strong></li>
                    </ul>
                </li>
                <li>You can replay the audio as many times as needed</li>
            </ol>
            <p><strong>Tip:</strong> Try tapping along with the rhythm to help you compare the patterns.</p>
        </div>
        
        <div class="audio-container">
            <p>Instructions:</p>
            <audio id="rhythmInstruction" controls src="audio/rhythm-instruction.mp3"></audio>
        </div>
        
        <div class="audio-container">
            <p>Example:</p>
            <audio id="rhythmExample" controls src="audio/rhythm-example.mp3"></audio>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="nextPage()">Next ➡️</button>
        </div>
    </div>

    <!-- Page 13: Section C Question 1 -->
    <div class="page" id="page13">
        <div class="section-title">
            <h2>Section C - Rhythm Test</h2>
        </div>
        <span class="question-label">Question C1</span>
        <p>Listen to the two rhythms:</p>
        
        <div class="audio-container">
            <audio id="rhythmQ1" controls src="audio/rhythm1.mp3"></audio>
        </div>
        
        <div class="question">
            <p>Is the second rhythm:</p>
            <div class="options">
                <div class="option" onclick="selectOption(this, 'C1', 'D')">D (Different)</div>
                <div class="option" onclick="selectOption(this, 'C1', 'S')">S (Same)</div>
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="nextPage()" id="nextBtnC1" disabled>Next ➡️</button>
        </div>
    </div>

    <!-- Page 14: Section C Question 2 -->
    <div class="page" id="page14">
        <div class="section-title">
            <h2>Section C - Rhythm Test</h2>
        </div>
        <span class="question-label">Question C2</span>
        <p>Listen to the two rhythms:</p>
        
        <div class="audio-container">
            <audio id="rhythmQ2" controls src="audio/rhythm2.mp3"></audio>
        </div>
        
        <div class="question">
            <p>Is the second rhythm:</p>
            <div class="options">
                <div class="option" onclick="selectOption(this, 'C2', 'D')">D (Different)</div>
                <div class="option" onclick="selectOption(this, 'C2', 'S')">S (Same)</div>
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="nextPage()" id="nextBtnC2" disabled>Next ➡️</button>
        </div>
    </div>

    <!-- Page 15: Section C Question 3 -->
    <div class="page" id="page15">
        <div class="section-title">
            <h2>Section C - Rhythm Test</h2>
        </div>
        <span class="question-label">Question C3</span>
        <p>Listen to the two rhythms:</p>
        
        <div class="audio-container">
            <audio id="rhythmQ3" controls src="audio/rhythm3.mp3"></audio>
        </div>
        
        <div class="question">
            <p>Is the second rhythm:</p>
            <div class="options">
                <div class="option" onclick="selectOption(this, 'C3', 'D')">D (Different)</div>
                <div class="option" onclick="selectOption(this, 'C3', 'S')">S (Same)</div>
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="showSectionScore('C')" id="nextBtnC3" disabled>See Results! 🎉</button>
        </div>
    </div>

    <!-- Page 16: Section C Results -->
    <div class="page" id="page16">
        <div class="section-title">
            <h2>Section C - Rhythm Test Results</h2>
        </div>
        
        <div class="score-display">
            <p>You got <span id="scoreC">0</span> out of 3 correct!</p>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progressC"></div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="startSectionD()">Continue to Section D ➡️</button>
        </div>
    </div>

    <!-- Section D Pages (Physical Characteristics) -->
    <div class="page" id="page17">
        <div class="section-title">
            <h2>Section D - Physical Characteristics</h2>
        </div>
        <p>These questions help match your physical traits to instruments.</p>
        
<!-- Page 17 - Teeth Question (changed "Very Even" to "Even") -->
<div class="question">
    <span class="question-label">Question D1</span>
    <p>How would you describe your teeth? If you're not sure, just guess!</p>
    <div class="options">
        <div class="option" onclick="selectOption(this, 'D1', 'Even')">Even</div>
        <div class="option" onclick="selectOption(this, 'D1', 'Less Even')">Less Even</div>
    </div>
</div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="nextPage()" id="nextBtnD1" disabled>Next ➡️</button>
        </div>
    </div>

    <!-- Page 18: Section D Question 2 -->
    <div class="page" id="page18">
        <div class="section-title">
            <h2>Section D - Physical Characteristics</h2>
        </div>
        
        <div class="question">
            <span class="question-label">Question D2</span>
            <p>How would you describe your lips? If you're not sure, just guess!</p>
            <div class="options">
                <div class="option" onclick="selectOption(this, 'D2', 'Full or Large')">Full or Large</div>
                <div class="option" onclick="selectOption(this, 'D2', 'Medium')">Medium</div>
                <div class="option" onclick="selectOption(this, 'D2', 'Thin')">Thin</div>
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="startSectionE()" id="nextBtnD2" disabled>Continue to Section E ➡️</button>
        </div>
    </div>

<!-- Page 19: Section E Question 1 -->
<div class="page" id="page19">
    <div class="section-title">
        <h2>Section E - Musical Background</h2>
    </div>
    
    <div class="question">
        <span class="question-label">Question E1</span>
        <p>Can you normally hum or carry a tune?</p>
        <div class="options">
            <div class="option" onclick="selectOption(this, 'E1', 'Always')">Always</div>
            <div class="option" onclick="selectOption(this, 'E1', 'Sometimes')">Sometimes</div>
            <div class="option" onclick="selectOption(this, 'E1', 'Not really')">Not really</div>
        </div>
    </div>
    
    <!-- THIS IS THE CRUCIAL BUTTON CONTAINER THAT WAS MISSING -->
    <div class="button-container">
        <button onclick="prevPage()">⬅️ Back</button>
        <button onclick="nextPage()" id="nextBtnE1" disabled>Next ➡️</button>
    </div>
</div>

    <!-- Page 20: Section E Question 2 -->
    <div class="page" id="page20">
        <div class="section-title">
            <h2>Section E - Musical Background</h2>
        </div>
        
        <div class="question">
            <span class="question-label">Question E2</span>
            <p>How many years of piano instruction have you had?</p>
            <div class="options">
                <div class="option" onclick="selectOption(this, 'E2', '0')">0 years</div>
                <div class="option" onclick="selectOption(this, 'E2', '1')">1 year</div>
                <div class="option" onclick="selectOption(this, 'E2', '2')">2 years</div>
                <div class="option" onclick="selectOption(this, 'E2', '3+')">3+ years</div>
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="startSectionF()" id="nextBtnE2" disabled>Continue to Section F ➡️</button>
        </div>
    </div>

    <!-- Section F Pages (Personality) -->
    <div class="page" id="page21">
        <div class="section-title">
            <h2>Section F - Personality</h2>
        </div>
        
        <div class="question">
            <span class="question-label">Question F1</span>
            <p>Do you prefer working in small groups, large groups, or does it not matter?</p>
            <div class="options">
                <div class="option" onclick="selectOption(this, 'F1', 'Small Groups')">Small Groups</div>
                <div class="option" onclick="selectOption(this, 'F1', 'Large Groups')">Large Groups</div>
                <div class="option" onclick="selectOption(this, 'F1', 'Does not matter')">Does not matter</div>
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="nextPage()" id="nextBtnF1" disabled>Next ➡️</button>
        </div>
    </div>

    <!-- Page 22: Section F Question 2 -->
    <div class="page" id="page22">
        <div class="section-title">
            <h2>Section F - Personality</h2>
        </div>
        
        <div class="question">
            <span class="question-label">Question F2</span>
            <p>What kinds of grades do you usually get?</p>
            <div class="options">
                <div class="option" onclick="selectOption(this, 'F2', 'Usually As and Bs')">Usually As and Bs</div>
                <div class="option" onclick="selectOption(this, 'F2', 'mix of Bs and Cs')">Mix of Bs and Cs</div>
                <div class="option" onclick="selectOption(this, 'F2', 'grades arent my thing')">Grades aren't my thing</div>
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="nextPage()" id="nextBtnF2" disabled>Next ➡️</button>
        </div>
    </div>

    <!-- Page 23: Section F Question 3 -->
    <div class="page" id="page23">
        <div class="section-title">
            <h2>Section F - Personality</h2>
        </div>
        
        <div class="question">
            <span class="question-label">Question F3</span>
            <p>Rate your organizational abilities:</p>
            <div class="options">
                <div class="option" onclick="selectOption(this, 'F3', 'Really good!')">Really good!</div>
                <div class="option" onclick="selectOption(this, 'F3', 'Average')">Average</div>
                <div class="option" onclick="selectOption(this, 'F3', 'Not the best')">Not the best</div>
            </div>
        </div>
        
        <div class="button-container">
            <button onclick="prevPage()">⬅️ Back</button>
            <button onclick="showFinalResults()" id="nextBtnF3" disabled>See My Results! 🎉</button>
        </div>
    </div>

    <!-- Final Results Page -->
    <div class="page" id="resultsPage">
        <div class="results">
            <h1>🎉 Your Instrument Matches! 🎊</h1>
            <p>Based on your answers, you would be a great fit for:</p>
            
            <div id="recommendations">
                <!-- Will be filled by JavaScript -->
            </div>
            
            <p>Remember, you don't have to choose one of these - this is just a suggestion to help you succeed!</p>
            <p>Have fun making music!</p>
            
            <div class="button-container">
                <button onclick="prevPage()">⬅️ Back</button>
                <button onclick="restartTest()">Take Again! 🔄</button>
            </div>
        </div>
    </div>

    <script>
        // Current page tracking
        let currentPage = 1;
        const totalPages = 23;
        
        // Store all audio elements to control playback
        const audioElements = {};
        
        // User responses
        const responses = {
            A1: null, A2: null, A3: null,
            B1: null, B2: null, B3: null,
            C1: null, C2: null, C3: null,
            D1: null, D2: null,
            E1: null, E2: null,
            F1: null, F2: null, F3: null
        };
        
        // Correct answers
        const correctAnswers = {
            A1: 'H', A2: 'L', A3: 'S',
            B1: 'S', B2: 'D', B3: 'S',
            C1: 'S', C2: 'D', C3: 'S'
        };
        
        // Initialize audio elements when page loads
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('audio').forEach(audio => {
                audioElements[audio.id] = audio;
            });
        });
        
        // Navigation functions
        function nextPage() {
            if (currentPage < totalPages) {
                pauseAllAudio();
                document.getElementById(`page${currentPage}`).classList.remove('active');
                currentPage++;
                document.getElementById(`page${currentPage}`).classList.add('active');
                updateProgressBar();
            }
        }
        
        function prevPage() {
            if (currentPage > 1) {
                pauseAllAudio();
                document.getElementById(`page${currentPage}`).classList.remove('active');
                currentPage--;
                document.getElementById(`page${currentPage}`).classList.add('active');
                updateProgressBar();
            }
        }
        
        function pauseAllAudio() {
            Object.values(audioElements).forEach(audio => {
                audio.pause();
                audio.currentTime = 0;
            });
        }
        
        function updateProgressBar() {
            const progress = (currentPage / totalPages) * 100;
            document.querySelectorAll('.progress-bar').forEach(bar => {
                bar.style.width = `${progress}%`;
            });
        }
        
        // Section navigation functions
        function startSectionB() {
            pauseAllAudio();
            currentPage = 7;
            document.getElementById(`page6`).classList.remove('active');
            document.getElementById(`page7`).classList.add('active');
            updateProgressBar();
        }
        
        function startSectionC() {
            pauseAllAudio();
            currentPage = 12;
            document.getElementById(`page11`).classList.remove('active');
            document.getElementById(`page12`).classList.add('active');
            updateProgressBar();
        }
        
        function startSectionD() {
            pauseAllAudio();
            currentPage = 17;
            document.getElementById(`page16`).classList.remove('active');
            document.getElementById(`page17`).classList.add('active');
            updateProgressBar();
        }
        
        function startSectionE() {
            pauseAllAudio();
            currentPage = 19;
            document.getElementById(`page18`).classList.remove('active');
            document.getElementById(`page19`).classList.add('active');
            updateProgressBar();
        }
        
        function startSectionF() {
            pauseAllAudio();
            currentPage = 21;
            document.getElementById(`page20`).classList.remove('active');
            document.getElementById(`page21`).classList.add('active');
            updateProgressBar();
        }
        
        // Answer selection
        function selectOption(element, questionId, value) {
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            element.classList.add('selected');
            responses[questionId] = value;
            
            document.getElementById(`nextBtn${questionId}`).disabled = false;
        }
        
        // Section scoring
        function showSectionScore(section) {
            let correct = 0;
            for (let i = 1; i <= 3; i++) {
                const question = `${section}${i}`;
                if (responses[question] === correctAnswers[question]) {
                    correct++;
                }
            }
            
            document.getElementById(`score${section}`).textContent = correct;
            document.getElementById(`progress${section}`).style.width = `${(correct / 3) * 100}%`;
            
            if (correct === 3) {
                createConfetti();
            }
            
            nextPage();
        }
        
   <!-- In the showFinalResults function, replace with this: -->
function showFinalResults() {
    const recommendations = calculateRecommendations();
    const container = document.getElementById('recommendations');
    container.innerHTML = '';
    
    createConfetti();
    createMusicNotes();
    
    recommendations.forEach((instrument, index) => {
        const card = document.createElement('div');
        card.className = 'instrument-card';
        card.innerHTML = `
            <img src="images/${instrument.name.toLowerCase().includes('trombone')
                ? 'trombone'
                : instrument.name.toLowerCase().replace(/\s+/g, '-')}.png"
                alt="${instrument.name}"
                class="instrument-img">
            <h3>${instrument.name}</h3>
            ${index === 0 ? '<p>🥇 Best Match!</p>' : ''}
            ${index === 1 ? '<p>🥈 Great Option!</p>' : ''}
            ${index === 2 ? '<p>🥉 Also Good!</p>' : ''}
            ${instrument.name.toLowerCase().includes('trombone') ? 
                '<p class="note">If you need to choose between trombone and euphonium, probably choose trombone unless you have a particularly small body frame.</p>' : 
                ''}
        `;
        container.appendChild(card);
    });
    
    // Call the function to submit results to Google Sheets
    submitResultsToGoogleSheets(recommendations);
    
    // Show results page
    pauseAllAudio();
    document.getElementById(`page${currentPage}`).classList.remove('active');
    currentPage = totalPages;
    document.getElementById('resultsPage').classList.add('active');
    updateProgressBar();
}

// Google Sheets submission function
function submitResultsToGoogleSheets(recommendations) {
    const formSubmitUrl = 'https://script.google.com/macros/s/AKfycbxeXx0ZpnjJt7-k1dj2j1IzBPovEK7lsQrPt45txwqnhBzS1PCK8zkr_dIsM9apwNQOBQ/exec';
    
    const formData = new FormData();
    formData.append('timestamp', new Date().toISOString());
    formData.append('topRecommendation', recommendations[0]?.name || 'None');
    formData.append('pitchScore', calculateSectionScore('A'));
    formData.append('melodyScore', calculateSectionScore('B'));
    formData.append('rhythmScore', calculateSectionScore('C'));
    formData.append('teeth', responses.D1);
    formData.append('lips', responses.D2);
    formData.append('canCarryTune', responses.E1);
    formData.append('pianoExperience', responses.E2);
    formData.append('groupPreference', responses.F1);
    formData.append('grades', responses.F2);
    formData.append('organization', responses.F3);
    formData.append('allRecommendations', recommendations.map(i => i.name).join(', '));

    // Create feedback element
    const feedbackEl = document.createElement('div');
    feedbackEl.style.padding = '10px';
    feedbackEl.style.margin = '10px 0';
    feedbackEl.style.borderRadius = '5px';
    document.getElementById('recommendations').prepend(feedbackEl);

    fetch(formSubmitUrl, {
        method: 'POST',
        mode: 'no-cors',
        body: formData
    })
    .then(() => {
        console.log('Submission successful');
        feedbackEl.textContent = '✅ Results saved successfully!';
        feedbackEl.style.backgroundColor = '#e6f7e6';
    })
    .catch(error => {
        console.error('Error submitting:', error);
        feedbackEl.textContent = '⚠️ Could not save results (check console)';
        feedbackEl.style.backgroundColor = '#ffebee';
    });
}
        
        // Final recommendation calculation
        function calculateRecommendations() {
            // Calculate section scores
            const sectionScores = {
                A: calculateSectionScore('A'), // Pitch
                B: calculateSectionScore('B'), // Melody
                C: calculateSectionScore('C'), // Rhythm
            };
            
            // Calculate instrument scores
            const instrumentScores = {
                clarinet: calculateClarinetScore(sectionScores),
                trombone: calculateTromboneScore(sectionScores),
                trumpet: calculateTrumpetScore(sectionScores),
                flute: calculateFluteScore(sectionScores),
                horn: calculateHornScore(sectionScores),
                oboe: calculateOboeScore(sectionScores),
                percussion: calculatePercussionScore(sectionScores)
            };
            
            // Sort instruments by score (highest first)
            const sortedInstruments = Object.keys(instrumentScores)
                .map(instrument => ({ 
                    name: formatInstrumentName(instrument), 
                    score: instrumentScores[instrument] 
                }))
                .sort((a, b) => b.score - a.score)
                .filter(item => item.score > 0) // Remove instruments with 0 score
                .slice(0, 3); // Top 3 only
            
            return sortedInstruments;
        }
        
        function formatInstrumentName(name) {
            if (name === 'trombone') return 'Trombone or Euphonium'; // Updated display name
            if (name === 'horn') return 'French Horn';
            return name.charAt(0).toUpperCase() + name.slice(1);
        }
        
        // Section scoring helpers
        function calculateSectionScore(section) {
            let correct = 0;
            for (let i = 1; i <= 3; i++) {
                const question = `${section}${i}`;
                if (responses[question] === correctAnswers[question]) {
                    correct++;
                }
            }
            return correct;
        }
        
        // Instrument scoring algorithms
    function calculateClarinetScore(scores) {
        let score = 0;
        
        // Pitch and Melody tests
        if (scores.A === 3) score += 2;
        else if (scores.A >= 2) score += 3;
        else if (scores.A >= 1) score += 2;
        else score += 2;
        
        if (scores.B === 3) score += 2;
        else if (scores.B >= 2) score += 3;
        else if (scores.B >= 1) score += 2;
        else score += 2;
        
        // Rhythm test
        if (scores.C < 3) score += 3;
        
        // Teeth (D1) - Updated: Points for "Less Even"
        if (responses.D1 === 'Less Even') score += 2;
        else score += 1;
        
        // Lips (D2)
        if (responses.D2 === 'Medium' || responses.D2 === 'Full or Large') score += 3;
        
        // Groups (F1)
        if (responses.F1 === 'Large Groups' || responses.F1 === 'Does not matter') score += 3;
        else score += 2;
        
        // Grades (F2) - Updated: Points for "mix of Bs and Cs"
        if (responses.F2 === 'mix of Bs and Cs') score += 2;
        else if (responses.F2 === 'Usually As and Bs') score += 1;
        else score += 1;
        
        // Base score
        score += 5;
        
        return score;
    }
        
    function calculateTromboneScore(scores) {
        let score = 0;
        
        // Pitch - decent or good
        if (scores.A === 3) score += 4;
        else if (scores.A >= 2) score += 5;
        
        // Melody - added points
        if (scores.B === 3) score += 2;
        else if (scores.B >= 2) score += 1;
        
        // Lips - full or medium
        if (responses.D2 === 'Full or Large') score += 6;
        else if (responses.D2 === 'Medium') score += 4;
        
        // Musicality
        if (responses.E1 === 'Always!' || responses.E1 === 'Sometimes') score += 3;
        
        // Base score
        score += 3;
        
        return score;
    }
        
    function calculateTrumpetScore(scores) {
    	let score = 0;

    	if (scores.A === 3) score += 4;
    	else if (scores.A >= 2) score += 3;

    	if (scores.B === 3) score += 2;
    	else if (scores.B >= 2) score += 1;

    	if (responses.D2 === 'Thin') score += 5;
    	else if (responses.D2 === 'Medium') score += 3;

    	if (responses.D1 === 'Even') score += 1;  // Updated
   	 else score -= 2;

   	 if (responses.E1 === 'Always') score += 3;  // Updated
   	 score += 2;
   	 return score;
    }

        
        function calculateFluteScore(scores) {
            let score = 0;
            
            // Pitch test
            if (scores.A === 3) score += 3;
            else if (scores.A >= 2) score += 2;
            else if (scores.A >= 1) score += 1;
            
            // Teeth (D1)
            if (responses.D1 === 'Very Even') score += 3;
            
            // Lips (D2)
            if (responses.D2 === 'Medium' || responses.D2 === 'Full or Large') score += 3;
            
            // Groups (F1)
            if (responses.F1 === 'Large Groups' || responses.F1 === 'Does not matter') score += 2;
            else score += 1;
            
            // Base score
            score += 2;
            
            return score;
        }
        
    function calculateHornScore(scores) {
    if (responses.D2 === 'Full or Large') return 0;
    let score = 0;

    if (scores.A >= 2) score += 4;
    if (scores.A === 3) score += 2;

    if (scores.B >= 2) score += 4;
    if (scores.B === 3) score += 2;

    if (responses.D2 === 'Thin') score += 6;
    else if (responses.D2 === 'Medium') score += 3;

    if (responses.D1 === 'Even') score += 1;  // Updated
    else score -= 2;

    if (responses.F2 === 'Usually As and Bs') score += 4;
    else if (responses.F2 === 'mix of Bs and Cs') score += 2;

    if (responses.E1 === 'Always') score += 3;  // Updated
    else if (responses.E1 === 'Sometimes') score += 1;
    score += 3;
    return score;
}

        
    function calculateOboeScore(scores) {
        let score = 0;
        
        // Small groups preference (bonus, not requirement)
        if (responses.F1 === 'Small Groups') score += 4;
        
        // Grades
        if (responses.F2 === 'Usually As and Bs') score += 3;
        
        // Organization
        if (responses.F3 === 'Really good!') score += 3;
        else if (responses.F3 === 'Average') score += 2;
        
        // Lips
        if (responses.D2 === 'Medium' || responses.D2 === 'Full or Large') score += 2;
        
        // Piano experience (added bonus)
        if (responses.E2 !== '0') score += 1;
        
        return score;
    }
        
        function calculatePercussionScore(scores) {
            // Must have at least 2 years piano
            if (responses.E2 !== '2' && responses.E2 !== '3+') return 0;
            
            // Must have perfect rhythm
            if (scores.C !== 3) return 0;
            
            let score = 0;
            
            // Piano experience
            if (responses.E2 === '3+') score += 8;
            else if (responses.E2 === '2') score += 7;
            
            // Grades
            if (responses.F2 === 'Usually As and Bs') score += 6;
            else return 0;
            
            // Organization
            if (responses.F3 === 'Really good!') score += 5;
            else if (responses.F3 === 'Average') score += 3;
            else return 0;
            
            // Perfect match bonus
            if (responses.E2 !== '0' && scores.C === 3 && 
                responses.F2 === 'Usually As and Bs' && 
                responses.F3 !== 'Not the best') {
                score += 5;
            }
            
            return score;
        }
        
        // Celebration effects
        function createConfetti() {
            const colors = ['#6a4c93', '#f8bbd0', '#ff9a8b', '#FFD166', '#06D6A0'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.width = `${Math.random() * 10 + 5}px`;
                confetti.style.height = `${Math.random() * 10 + 5}px`;
                confetti.style.animation = `confetti-fall ${Math.random() * 3 + 2}s linear forwards`;
                document.body.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }
        
        function createMusicNotes() {
            const notes = ['♪', '♫', '♩', '♬', '♭', '♮'];
            
            for (let i = 0; i < 20; i++) {
                const note = document.createElement('div');
                note.className = 'music-note';
                note.textContent = notes[Math.floor(Math.random() * notes.length)];
                note.style.left = `${Math.random() * 100}%`;
                note.style.color = ['#6a4c93', '#f8bbd0', '#ff9a8b'][Math.floor(Math.random() * 3)];
                note.style.animationDuration = `${Math.random() * 2 + 1}s`;
                document.body.appendChild(note);
                
                setTimeout(() => {
                    note.remove();
                }, 3000);
            }
        }
        
        // Restart test
        function restartTest() {
            // Reset all responses
            Object.keys(responses).forEach(key => {
                responses[key] = null;
            });
            
            // Clear selections
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Pause any audio
            pauseAllAudio();
            
            // Reset to first page
            document.getElementById('resultsPage').classList.remove('active');
            currentPage = 1;
            document.getElementById('page1').classList.add('active');
            updateProgressBar();
        }
        
        // Initialize
        updateProgressBar();
    </script>
</body>
</html>